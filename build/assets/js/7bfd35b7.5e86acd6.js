"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7587],{3263:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>t,metadata:()=>_,toc:()=>a});var s=o(4848),r=o(8453);const t={sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:4},i="Docker",_={id:"ops/docker",title:"Docker",description:"1.1 Dockerfile For Programming Languages",source:"@site/docs/ops/docker.mdx",sourceDirName:"ops",slug:"/ops/docker",permalink:"/0.61.81-suruasucod-nitb/docs/ops/docker",draft:!1,unlisted:!1,editUrl:"https://github.com/b-tin/0.61.81-suruasucod-nitb/tree/main/docs/ops/docker.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:4},sidebar:"tutorialSidebar",previous:{title:"Amazon Cloud Service (AWS)",permalink:"/0.61.81-suruasucod-nitb/docs/ops/aws"},next:{title:"Troubleshooting for Daily Operations",permalink:"/0.61.81-suruasucod-nitb/docs/ops/troubleshoot"}},l={},a=[{value:"1.1 Dockerfile For Programming Languages",id:"11-dockerfile-for-programming-languages",level:2},{value:"Python",id:"python",level:3},{value:"NodeJS",id:"nodejs",level:3},{value:"1.2 Docker Compose",id:"12-docker-compose",level:2},{value:"Airflow",id:"airflow",level:3},{value:"MongoDB",id:"mongodb",level:3},{value:"MySQL",id:"mysql",level:3},{value:"PostgreSQL",id:"postgresql",level:3},{value:"Redis",id:"redis",level:3},{value:"Superset",id:"superset",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",pre:"pre",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"docker",children:"Docker"}),"\n",(0,s.jsx)(e.h2,{id:"11-dockerfile-for-programming-languages",children:"1.1 Dockerfile For Programming Languages"}),"\n",(0,s.jsx)(e.h3,{id:"python",children:"Python"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"FROM python:3.9.18-bookworm\n\nENV USER_NON_ROOT btin\n\nRUN pip install --upgrade pip\n\n# Create non-root user\nRUN groupadd --gid 1001 $USER_NON_ROOT \\\n    && adduser --shell /bin/sh --uid 1001 --gid 1001 $USER_NON_ROOT \\\n    && mkdir -p /app /var/log/$USER_NON_ROOT \\\n    && chown -R $USER_NON_ROOT:$USER_NON_ROOT /app /var/log/$USER_NON_ROOT\n\nWORKDIR /app\n\nUSER $USER_NON_ROOT\n\nCOPY --chown=$USER_NON_ROOT:$USER_NON_ROOT requirements.txt requirements.txt\nRUN pip3 install --user -r requirements.txt\nENV PATH $PATH:/home/$USER_NON_ROOT/.local/bin\n\nCOPY --chown=$USER_NON_ROOT:$USER_NON_ROOT . .\n\n# Non-root user can not run with port < 1024\nEXPOSE 8080\n\nRUN chmod +x entrypoint.sh\nCMD /app/entrypoint.sh\n"})}),"\n",(0,s.jsx)(e.h3,{id:"nodejs",children:"NodeJS"}),"\n",(0,s.jsx)(e.h2,{id:"12-docker-compose",children:"1.2 Docker Compose"}),"\n",(0,s.jsx)(e.h3,{id:"airflow",children:"Airflow"}),"\n",(0,s.jsx)(e.h3,{id:"mongodb",children:"MongoDB"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  mongodb:\n    image: mongo:7.0.3\n    container_name: btin-mongodb\n    ports:\n      - 27017:27017\n    environment:\n      - MONGO_INITDB_DATABASE=btin-mongodb\n      - MONGO_INITDB_ROOT_USERNAME=badmin\n      - MONGO_INITDB_ROOT_PASSWORD=bpassword\n    volumes:\n      - ./mongo-entrypoint:/docker-entrypoint-initdb.d\n      - mongodb:/data/db\n      - mongoconfig:/data/configdb\n    networks:\n      - mongo_net\n\n  mongo-express:\n    image: mongo-express:latest\n    restart: always\n    ports:\n      - \"8081:8081\"\n    environment:\n      - ME_CONFIG_MONGODB_ADMINUSERNAME=badmin\n      - ME_CONFIG_MONGODB_ADMINPASSWORD=bpassword\n      - ME_CONFIG_MONGODB_SERVER=mongodb\n    networks:\n      - mongo_net\n\nvolumes:\n  mongodb:\n  mongoconfig:\n\nnetworks:\n  mongo_net:\n    driver: bridge\n"})}),"\n",(0,s.jsx)(e.h3,{id:"mysql",children:"MySQL"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  mysqldb:\n    image: mysql:5.7\n    restart: always\n    command: --max_allowed_packet=1072731894\n    environment:\n      - MYSQL_DATABASE=btest\n      - MYSQL_ROOT_PASSWORD=bpassword\n    ports:\n      - 30306:3306\n    volumes:\n      - mysqldb:/var/lib/mysql\n    networks:\n      - mysql_net\n\nvolumes:\n  mysqldb:\n\nnetworks:\n  mysql_net:\n    driver: bridge\n"})}),"\n",(0,s.jsx)(e.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  postgresdb:\n    image: postgres:12.11\n    ports:\n    - 5432:5432\n    env_file:\n      - database.env\n    volumes:\n      - postgresdb:/var/lib/postgresql/data/\n    networks:\n      - postgres_net\n\n  phppgadmin:\n    image: dockage/phppgadmin:latest\n    ports:\n    - "38080:80"\n    - "30443:443"\n    environment:\n    - PHP_PG_ADMIN_SERVER_DESC=PostgreSQL\n    - PHP_PG_ADMIN_SERVER_HOST=postgresdb\n    - PHP_PG_ADMIN_SERVER_PORT=5432\n    - PHP_PG_ADMIN_SERVER_SSL_MODE=allow\n    - PHP_PG_ADMIN_SERVER_DEFAULT_DB=template1\n    - PHP_PG_ADMIN_SERVER_PG_DUMP_PATH=/usr/bin/pg_dump\n    - PHP_PG_ADMIN_SERVER_PG_DUMPALL_PATH=/usr/bin/pg_dumpall\n    - PHP_PG_ADMIN_DEFAULT_LANG=auto\n    - PHP_PG_ADMIN_AUTO_COMPLETE=default on\n    - PHP_PG_ADMIN_EXTRA_LOGIN_SECURITY=false\n    - PHP_PG_ADMIN_OWNED_ONLY=false\n    - PHP_PG_ADMIN_SHOW_COMMENTS=true\n    - PHP_PG_ADMIN_SHOW_ADVANCED=false\n    - PHP_PG_ADMIN_SHOW_SYSTEM=false\n    - PHP_PG_ADMIN_MIN_PASSWORD_LENGTH=1\n    - PHP_PG_ADMIN_LEFT_WIDTH=200\n    - PHP_PG_ADMIN_THEME=default\n    - PHP_PG_ADMIN_SHOW_OIDS=false\n    - PHP_PG_ADMIN_MAX_ROWS=30\n    - PHP_PG_ADMIN_MAX_CHARS=50\n    - PHP_PG_ADMIN_USE_XHTML_STRICT=false\n    - PHP_PG_ADMIN_HELP_BASE=http://www.postgresql.org/docs/%s/interactive/\n    - PHP_PG_ADMIN_AJAX_REFRESH=3\n    networks:\n      - postgres_net\n\nvolumes:\n  postgresdb:\n\nnetworks:\n postgres_net:\n    driver: bridge\n'})}),"\n",(0,s.jsx)(e.h3,{id:"redis",children:"Redis"}),"\n",(0,s.jsx)(e.h3,{id:"superset",children:"Superset"})]})}function c(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>i,x:()=>_});var s=o(6540);const r={},t=s.createContext(r);function i(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function _(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);